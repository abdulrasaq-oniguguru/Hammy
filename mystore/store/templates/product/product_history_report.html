{% extends 'base.html' %}
{% load static %}
{% block content %}
<div class="py-5" style="background: linear-gradient(rgba(26, 26, 26, 0.8), rgba(26, 26, 26, 0.8)), url({% static 'img/homepage.jpg' %}) no-repeat center center fixed; background-size: cover;">
    <div class="container">
        <!-- Title -->
        <h1 class="text-center mb-5 display-5 fw-bold text-white">Product History Report</h1>

        <div class="row justify-content-center">
            <div class="col-lg-10 col-md-12">
                <div class="card border-0 shadow" style="background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(10px);">
                    <div class="card-body p-4">

                        {% if history %}
                            <div class="table-responsive">
                                <table class="table align-middle mb-0">
                                    <thead class="bg-secondary text-white">
                                        <tr>
                                            <th>Product</th>
                                            <th>Action</th>
                                            <th>Reason</th>
                                            <th>User</th>
                                            <th>Date</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% for record in history %}
                                        <tr>
                                            <td>{{ record.product.brand }}</td>
                                            <td>
                                                {% if record.action == 'created' %}
                                                    <span class="badge bg-success">{{ record.get_action_display }}</span>
                                                {% elif record.action == 'updated' %}
                                                    <span class="badge bg-warning text-dark">{{ record.get_action_display }}</span>
                                                {% else %}
                                                    <span class="badge bg-danger">{{ record.get_action_display }}</span>
                                                {% endif %}
                                            </td>
                                            <td>{{ record.reason|default:"â€”" }}</td>
                                            <td>{{ record.user.username }}</td>
                                            <td>{{ record.date|date:"M d, Y H:i" }}</td>
                                        </tr>
                                        {% empty %}
                                        <tr>
                                            <td colspan="5" class="text-center text-muted py-4">No history found.</td>
                                        </tr>
                                        {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                        {% else %}
                            <div class="alert alert-info text-center mt-3 mb-0" role="alert">
                                No product history available.
                            </div>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    /* Badge styles */
    .badge.bg-success {
        background-color: #28a745 !important;
    }

    .badge.bg-warning.text-dark {
        background-color: #ffc107 !important;
        color: #000 !important;
    }

    .badge.bg-danger {
        background-color: #dc3545 !important;
    }

    /* Table styling */
    .table {
        --bs-table-bg: transparent;
        --bs-table-accent-bg: transparent;
        --bs-table-striped-bg: transparent;
        --bs-table-hover-bg: rgba(255, 255, 255, 0.05);
        color: #f5f5f5;
    }

    .table th,
    .table td {
        vertical-align: middle;
        border-top: 1px solid rgba(255, 255, 255, 0.1);
        color: #f5f5f5;
    }

    .table thead th {
        background-color: rgba(255, 255, 255, 0.1);
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    .table tbody tr:hover {
        background-color: rgba(255, 255, 255, 0.05);
    }

    /* Responsive adjustments */
    @media (max-width: 768px) {
        .table th, .table td {
            font-size: 0.9rem;
        }
    }
</style>
{% endblock %}